<div class="inventory-app">
  {{!-- 顶部工具栏 --}}
  <div class="inventory-toolbar">
    <div class="search-box">
      <input type="text" class="item-search" placeholder="搜索物品..." />
      <i class="fas fa-search"></i>
    </div>

    <button class="toolbar-btn create-item-btn" type="button" title="创建物品">
      <i class="fas fa-plus-circle"></i>
      <span>创建物品</span>
    </button>

    <div class="filter-menu">
      <button class="toolbar-btn filter-menu-btn" type="button" title="筛选">
        <i class="fas fa-filter"></i>
        <span>筛选</span>
      </button>
      <div class="filter-dropdown button-menu-list" style="display: none;">
        <div class="filter-section">
          <label>类型</label>
          <select name="filterType">
            <option value="">全部类型</option>
            <option value="combatDice">攻击骰</option>
            <option value="shootDice">射击骰</option>
            <option value="defenseDice">守备骰</option>
            <option value="triggerDice">触发骰</option>
            <option value="passiveDice">被动骰</option>
            <option value="weapon">武器</option>
            <option value="armor">防具</option>
            <option value="equipment">装备</option>
            <option value="item">物品</option>
          </select>
        </div>
        <div class="filter-section">
          <label>费用</label>
          <input type="text" name="filterCost" placeholder="例如: Cost:2"/>
        </div>
        <div class="filter-section">
          <label>星光</label>
          <input type="number" name="filterStarlight" placeholder="星光值" min="0"/>
        </div>
        <div class="filter-actions">
          <button class="apply-filter-btn" type="button">应用</button>
          <button class="clear-filter-btn" type="button">清除</button>
        </div>
      </div>
    </div>
  </div>

  {{!-- 物品列表表头（固定） --}}
  <div class="inventory-header">
    <div class="header-cell col-icon">图标</div>
    <div class="header-cell col-name">名称</div>
    <div class="header-cell col-type">类型</div>
    <div class="header-cell col-category">分类</div>
    <div class="header-cell col-dice">骰数</div>
    <div class="header-cell col-cost">费用</div>
    <div class="header-cell col-quantity">数量</div>
    <div class="header-cell col-starlight">星光</div>
    <div class="header-cell col-actions">操作</div>
  </div>

  {{!-- 物品列表内容（可滚动） --}}
  <div class="inventory-content">
    {{#each items as |item id|}}
    <div class="inventory-item-row"
         data-item-id="{{item._id}}"
         data-item-type="{{item.type}}"
         data-item-category="{{item.system.category}}"
         data-item-cost="{{item.system.cost}}"
         data-item-starlight="{{item.system.starlightCost}}"
         data-filtered="false">

      {{!-- 图标 --}}
      <div class="item-cell col-icon">
        <div class="item-icon-wrapper"
             data-item-id="{{item._id}}"
             title="{{item.system.effect}}">
          <img src="{{item.img}}"
               class="item-icon"
               data-item-id="{{item._id}}"
               draggable="true"/>
        </div>
      </div>

      {{!-- 名称 --}}
      <div class="item-cell col-name">{{item.name}}</div>

      {{!-- 类型 --}}
      <div class="item-cell col-type">{{item.typeLabel}}</div>

      {{!-- 分类 --}}
      <div class="item-cell col-category">{{item.system.category}}</div>

      {{!-- 骰数 --}}
      <div class="item-cell col-dice">{{item.system.diceFormula}}</div>

      {{!-- 费用 --}}
      <div class="item-cell col-cost">{{item.system.cost}}</div>

      {{!-- 数量 --}}
      <div class="item-cell col-quantity">{{item.system.quantity}}</div>

      {{!-- 星光 --}}
      <div class="item-cell col-starlight">
        {{#if item.system.starlightCost}}
        {{item.system.starlightCost}}
        {{else}}
        -
        {{/if}}
      </div>

      {{!-- 操作 --}}
      <div class="item-cell col-actions">
        <div class="item-actions">
          <button class="action-icon-btn item-use-btn" data-item-id="{{item._id}}" type="button" title="使用">
            <i class="fas fa-play-circle"></i>
          </button>
          <button class="action-icon-btn item-edit-btn" data-item-id="{{item._id}}" type="button" title="编辑">
            <i class="fas fa-edit"></i>
          </button>
          <button class="action-icon-btn item-delete-btn" data-item-id="{{item._id}}" type="button" title="删除">
            <i class="fas fa-trash-alt"></i>
          </button>
        </div>
      </div>
    </div>
    {{/each}}
  </div>
</div>
